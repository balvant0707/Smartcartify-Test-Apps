generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Session {
  id            String    @id
  shop          String    @db.VarChar(255)
  state         String    @db.VarChar(255)
  isOnline      Boolean   @default(false)
  scope         String?   @db.VarChar(1024)
  expires       DateTime?
  accessToken   String    @db.Text
  userId        BigInt?
  firstName     String?   @db.VarChar(255)
  lastName      String?   @db.VarChar(255)
  email         String?   @db.VarChar(320)
  accountOwner  Boolean   @default(false)
  locale        String?   @db.VarChar(32)
  collaborator  Boolean?  @default(false)
  emailVerified Boolean?  @default(false)

  @@map("session")
}

model shop {
  id            Int       @id @default(autoincrement())
  shop          String    @unique @db.VarChar(255)
  accessToken   String?   @db.Text
  installed     Boolean   @default(false)
  uninstalledAt DateTime?
  onboardedAt   DateTime?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  @@map("shop")
}

model ShippingRule {
  id                        Int      @id @default(autoincrement())
  shop                      String
  rewardType                String
  rateType                  String?
  amount                    String?
  minSubtotal               String?
  method                    String
  enabled                   Boolean  @default(false)
  createdAt                 DateTime @default(now())
  updatedAt                 DateTime @updatedAt
  iconChoice                String?  @default("truck")
  shopifyRateId             String?  @db.VarChar(255)
  shopifyMethodDefinitionId String?  @db.VarChar(255)
  progressTextBefore        String?  @db.Text
  progressTextAfter         String?  @db.Text
  progressTextBelow         String?  @db.Text
  campaignName              String?  @db.VarChar(255)
  cartStepName              String?  @db.VarChar(255)

  @@map("shippingrule")
}

model DiscountRule {
  id                    Int      @id @default(autoincrement())
  shop                  String
  type                  String
  value                 String?
  minPurchase           String?
  enabled               Boolean  @default(false)
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt
  iconChoice            String?  @default("tag")
  shopifyDiscountCodeId String?  @db.VarChar(255)
  shopifyPriceRuleId    String?  @db.VarChar(255)
  discountCode          String?  @db.VarChar(255)
  progressTextBefore    String?  @db.Text
  progressTextAfter     String?  @db.Text
  progressTextBelow     String?  @db.Text
  campaignName          String?  @db.VarChar(255)
  cartStepName          String?  @db.VarChar(255)
  codeCampaignName      String?  @db.VarChar(255)
  valueType             String   @default("percent")
  appliesTo             String?  @db.LongText
  codeDiscountId        String?  @db.VarChar(255)
  condition             String?  @db.VarChar(255)
  rewardType            String   @default("percent")
  scope                 String?  @db.VarChar(255)

  @@map("discountrule")
}

model FreeGiftRule {
  id                          Int      @id @default(autoincrement())
  shop                        String
  trigger                     String
  minPurchase                 String?
  qty                         String?
  limitPerOrder               String?
  enabled                     Boolean  @default(false)
  createdAt                   DateTime @default(now())
  updatedAt                   DateTime @updatedAt
  iconChoice                  String?  @default("gift")
  bonusProductId              String?  @db.VarChar(255)
  freeProductDiscountID       String?  @db.VarChar(255)
  minAmountFreeGiftDiscountId String?  @db.VarChar(255)
  minAmountShippingRateId     String?  @db.VarChar(255)
  allProductIds               String?  @db.LongText
  progressTextBefore          String?  @db.Text
  progressTextAfter           String?  @db.Text
  progressTextBelow           String?  @db.Text
  campaignName                String?  @db.VarChar(255)
  cartStepName                String?  @db.VarChar(255)

  @@map("freegiftrule")
}

model BxgyRule {
  id                       Int      @id @default(autoincrement())
  shop                     String
  xQty                     String
  yQty                     String
  scope                    String
  appliesTo                String?  @db.LongText
  giftType                 String
  giftSku                  String?
  maxGifts                 String?
  allowStacking            Boolean  @default(false)
  enabled                  Boolean  @default(false)
  createdAt                DateTime @default(now())
  updatedAt                DateTime @updatedAt
  iconChoice               String?  @default("sparkles")
  appliesCollectionIds     String?  @db.LongText
  appliesProductIds        String?  @db.LongText
  appliesStore             Boolean  @default(false)
  buyxgetyId               String?  @db.VarChar(255)
  afterOfferUnlockMessage  String?
  beforeOfferUnlockMessage String?
  campaignName             String?  @db.VarChar(255)

  @@map("bxgyrule")
}

model StyleSettings {
  id                       Int      @id @default(autoincrement())
  shop                     String
  font                     String
  base                     String
  headingScale             String
  radius                   String
  textColor                String
  bg                       String
  progress                 String
  createdAt                DateTime @default(now())
  updatedAt                DateTime @updatedAt
  cartDrawerBackground     String?
  cartDrawerTextColor      String?
  cartDrawerHeaderColor    String?
  discountCodeApply        Boolean  @default(false)
  cartDrawerImage          String?
  cartDrawerBackgroundMode String   @default("color")
  borderColor              String?
  buttonColor              String?
  checkoutButtonText       String?

  @@map("stylesettings")
}

model UpsellSettings {
  id                    Int      @id @default(autoincrement())
  shop                  String   @unique @db.VarChar(255)
  enabled               Boolean  @default(true)
  showAsSlider          Boolean  @default(true)
  autoplay              Boolean  @default(true)
  recommendationMode    String   @default("auto") @db.VarChar(32)
  sectionTitle          String?  @db.VarChar(255)
  buttonText            String?  @db.VarChar(255)
  backgroundColor       String?  @db.VarChar(32)
  textColor             String?  @db.VarChar(32)
  borderColor           String?  @db.VarChar(32)
  arrowColor            String?  @db.VarChar(32)
  selectedProductIds    String?  @db.LongText
  selectedCollectionIds String?  @db.LongText
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt

  @@map("upsellsettings")
}

model PlanSubscription {
  id                    Int       @id @default(autoincrement())
  shop                  String    @unique @db.VarChar(255)
  planId                String?   @db.VarChar(255)
  planName              String?   @db.VarChar(255)
  status                String?   @db.VarChar(45)
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  currentPeriodEnd      DateTime?
  shopifySubGid         String?
  billingInterval       String?   @db.VarChar(32)
  billingAmount         Decimal?  @db.Decimal(10, 2)
  billingCurrency       String?   @db.VarChar(10)
  trialDays             Int?
  isTest                Boolean?
  subscriptionCreatedAt DateTime? @db.DateTime(0)

  @@map("plansubscription")
}
